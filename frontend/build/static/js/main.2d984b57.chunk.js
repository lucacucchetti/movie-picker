(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{132:function(e,t,n){},137:function(e,t){},189:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){},194:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(35),s=n.n(r),i=n(24),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,208)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},l=n(33),u=n(36),j=n(16),b=n(26),d=n(14),O=n(71),h=n(52),p=n(51),x=n(11),f=n(65),m=n(74),v=n(207),g=(n(132),n(3));function w(e){var t=Object(c.useState)(null),n=Object(d.a)(t,2),a=(n[0],n[1]),r=Object(c.useState)(null),s=Object(d.a)(r,2),i=(s[0],s[1]),o=Object(c.useRef)(null),l=Object(c.useState)(""),u=Object(d.a)(l,2),O=u[0],h=u[1],p=Object(c.useState)([]),x=Object(d.a)(p,2),f=x[0],w=x[1],C=Object(c.useState)(),k=Object(d.a)(C,2),y=k[0],P=k[1];Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(Object(j.a)().mark((function e(){var t,n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I();case 3:t=e.sent,a(t.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(null);case 10:return e.prev=10,e.next=13,A();case 13:n=e.sent,i(n.message),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(10),i(null);case 20:case"end":return e.stop()}}),e,null,[[0,7],[10,17]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[e.isAuthenticated]);var S=function(e){var t=Object(m.a)(f);t.splice(e,1),w(t)},L=function(){var e;w([].concat(Object(m.a)(f),[O])),h(""),null===(e=o.current)||void 0===e||e.focus()};function I(){return v.a.get("random-api","/public",{})}function A(){return v.a.get("random-api","/private",{})}return Object(g.jsxs)("div",{className:"Home",children:[Object(g.jsxs)("header",{className:"Home-header",children:[Object(g.jsx)("h1",{children:"Movie Picker"}),Object(g.jsxs)("div",{className:"inline",children:[Object(g.jsx)("input",{ref:o,autoFocus:!0,type:"text",placeholder:"Replace me...",value:O,onChange:function(e){return h(e.target.value)},onKeyUp:function(e){return"Enter"===e.code&&L()}},"new-movie-input"),Object(g.jsx)("button",{disabled:""===O,onClick:L,children:"Add movie title"}),void 0!==y?Object(g.jsxs)("h5",{children:["We will be watching ",f[y]," today"]}):null,void 0!==y?Object(g.jsx)("button",{onClick:function(){P(void 0),S(y)},children:"Accept"}):null]},"new-movie-div"),Object(g.jsx)("br",{}),Object(g.jsx)("h3",{children:"Movie List"}),Object(g.jsx)("table",{children:Object(g.jsx)("tbody",{children:f.map((function(e,t){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsx)("button",{onClick:function(){return S(t)},children:"X"})}),Object(g.jsx)("td",{children:Object(g.jsx)("span",{children:e})})]},t)}))})}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){var e=Math.floor(Math.random()*f.length);P(e)},children:"Pick a random movie!"})]}),Object(g.jsxs)("footer",{className:"Home-footer",children:["Source:"," ",Object(g.jsx)("a",{className:"Home-link",href:"https://github.com/lucacucchetti/hosted-apps",children:"https://github.com/lucacucchetti/hosted-apps"})]})]})}var C=n(49),k=n(9),y=n(58);function P(e){var t=Object(c.useState)(e),n=Object(d.a)(t,2),a=n[0],r=n[1];return[a,function(e){r(Object(u.a)(Object(u.a)({},a),{},Object(y.a)({},e.target.id,e.target.value)))}]}n(189);function S(e){var t=Object(x.k)(),n=Object(c.useState)(!1),a=Object(d.a)(n,2),r=a[0],s=a[1],i=P({email:"",password:""}),o=Object(d.a)(i,2),l=o[0],u=o[1];function h(){return(h=Object(b.a)(Object(j.a)().mark((function n(c){return Object(j.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),s(!0),n.prev=2,n.next=5,O.a.signIn(l.email,l.password);case 5:e.userHasAuthenticated(!0),t.push("/"),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),alert(n.t0),s(!1);case 13:case"end":return n.stop()}}),n,null,[[2,9]])})))).apply(this,arguments)}return Object(g.jsx)("div",{className:"Login",children:Object(g.jsxs)(k.a,{onSubmit:function(e){return h.apply(this,arguments)},children:[Object(g.jsxs)(k.a.Group,{controlId:"email",children:[Object(g.jsx)(k.a.Label,{children:"Email"}),Object(g.jsx)(k.a.Control,{autoFocus:!0,type:"email",value:l.email,onChange:u})]}),Object(g.jsxs)(k.a.Group,{controlId:"password",children:[Object(g.jsx)(k.a.Label,{children:"Password"}),Object(g.jsx)(k.a.Control,{type:"password",value:l.password,onChange:u})]}),Object(g.jsx)(C.a,{block:!0,size:"lg",type:"submit",disabled:r||!(l.email.length>0&&l.password.length>0),children:"Login"})]})})}n(191);function L(e){var t=P({email:"",password:"",confirmPassword:"",confirmationCode:""}),n=Object(d.a)(t,2),a=n[0],r=n[1],s=Object(x.k)(),i=Object(c.useState)(null),o=Object(d.a)(i,2),l=o[0],u=o[1],h=Object(c.useState)(!1),p=Object(d.a)(h,2),f=p[0],m=p[1];function v(e){return w.apply(this,arguments)}function w(){return(w=Object(b.a)(Object(j.a)().mark((function e(t){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),m(!0),e.prev=2,e.next=5,O.a.signUp({username:a.email,password:a.password});case 5:n=e.sent,m(!1),u(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),alert(e.t0),m(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function y(e){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(Object(j.a)().mark((function t(n){return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),m(!0),t.prev=2,t.next=5,O.a.confirmSignUp(a.email,a.confirmationCode);case 5:return t.next=7,O.a.signIn(a.email,a.password);case 7:e.userHasAuthenticated(!0),s.push("/"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),alert(t.t0),m(!1);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))).apply(this,arguments)}return Object(g.jsx)("div",{className:"Signup",children:null===l?Object(g.jsxs)(k.a,{onSubmit:v,children:[Object(g.jsxs)(k.a.Group,{controlId:"email",children:[Object(g.jsx)(k.a.Label,{children:"Email"}),Object(g.jsx)(k.a.Control,{autoFocus:!0,type:"email",value:a.email,onChange:r})]}),Object(g.jsxs)(k.a.Group,{controlId:"password",children:[Object(g.jsx)(k.a.Label,{children:"Password"}),Object(g.jsx)(k.a.Control,{type:"password",value:a.password,onChange:r})]}),Object(g.jsxs)(k.a.Group,{controlId:"confirmPassword",children:[Object(g.jsx)(k.a.Label,{children:"Confirm Password"}),Object(g.jsx)(k.a.Control,{type:"password",onChange:r,value:a.confirmPassword})]}),Object(g.jsx)(C.a,{block:!0,size:"lg",type:"submit",variant:"success",disabled:f||!(a.email.length>0&&a.password.length>0&&a.password===a.confirmPassword),children:"Signup"})]}):Object(g.jsxs)(k.a,{onSubmit:y,children:[Object(g.jsxs)(k.a.Group,{controlId:"confirmationCode",children:[Object(g.jsx)(k.a.Label,{children:"Confirmation Code"}),Object(g.jsx)(k.a.Control,{autoFocus:!0,type:"tel",onChange:r,value:a.confirmationCode}),Object(g.jsx)(k.a.Text,{muted:!0,children:"Please check your email for the code."})]}),Object(g.jsx)(C.a,{block:!0,size:"lg",type:"submit",variant:"success",disabled:f||!(a.confirmationCode.length>0),children:"Verify"})]})})}n(192);var I=function(){var e=Object(c.useState)(!0),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(d.a)(r,2),i=s[0],o=s[1],l={isAuthenticated:i,userHasAuthenticated:o};function m(){return(m=Object(b.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.signOut();case 2:o(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.currentSession();case 3:o(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0);case 9:a(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),n?null:Object(g.jsxs)("div",{children:[Object(g.jsxs)(p.a,{bg:"dark",children:[Object(g.jsx)(f.LinkContainer,{to:"/",children:Object(g.jsx)(p.a.Brand,{children:"Movie Picker"})}),Object(g.jsx)(p.a.Toggle,{}),Object(g.jsx)(p.a.Collapse,{className:"justify-content-end",children:Object(g.jsx)(h.a,{activeKey:window.location.pathname,children:i?Object(g.jsx)(h.a.Link,{onClick:function(){return m.apply(this,arguments)},children:"Logout"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(f.LinkContainer,{to:"/signup",children:Object(g.jsx)(h.a.Link,{children:"Signup"})}),Object(g.jsx)(f.LinkContainer,{to:"/login",children:Object(g.jsx)(h.a.Link,{children:"Login"})})]})})})]}),Object(g.jsxs)(x.g,{children:[Object(g.jsx)(x.d,{exact:!0,path:"/",children:Object(g.jsx)(w,Object(u.a)({},l))}),Object(g.jsx)(x.d,{exact:!0,path:"/login",children:Object(g.jsx)(S,Object(u.a)({},l))}),Object(g.jsx)(x.d,{exact:!0,path:"/signup",children:Object(g.jsx)(L,Object(u.a)({},l))})]})]})};n(193);i.a.configure({Auth:{mandatorySignIn:!0,region:"eu-west-2",userPoolId:"{{ REACT_APP_USER_POOL_ID }}",identityPoolId:"{{ REACT_APP_IDENTITY_POOL_ID }}",userPoolWebClientId:"{{ REACT_APP_USER_POOL_CLIENT_ID }}"},API:{endpoints:[{name:"random-api",region:"eu-west-2",endpoint:"{{ REACT_APP_API_URL }}"}]}}),s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(l.BrowserRouter,{children:Object(g.jsx)(I,{})})}),document.getElementById("root")),o()}},[[194,1,2]]]);
//# sourceMappingURL=main.2d984b57.chunk.js.map